# Phase 1: 要件定義・基本設計ワークフロー

## 🎯 フェーズ概要
**目的**: プロジェクトの要件を整理・構造化し、実装可能な基本設計まで完成させる
**担当**: リーダーエージェント ↔ ユーザー
**実行環境**: **tmux不使用** - Claude Codeを直接起動
**完了条件**: ユーザー承認済み基本設計書の作成

---

## 📋 実行チェックリスト

### **Step 1-1: プロジェクト状況確認・要求整理** 👤➡️🤖
```yaml
トリガー: ユーザーからの機能追加・改修依頼
実行者: リーダーエージェント (Claude Code)

CRITICAL_ACTIONS:
  既存プロジェクトの場合:
    - 既存ドキュメント（README、設計書等）の確認
    - 現在の技術スタック・アーキテクチャの把握
    - 既存機能との関連性・影響範囲の確認
  
  新規機能の場合:
    - 空のプロジェクトであることを確認
    - 初期構築内容の明確化
  
  共通アクション:
    - ユーザー要求を自然言語で受取り
    - 要件を整理・構造化
    - 要件定義書ドラフト作成
    - ユーザーとの対話で要件精緻化
    - 最終要件定義書確定

completion_criteria:
  - プロジェクト状況の把握完了
  - 要件定義書作成・文書化済み
  - 既存システムへの影響分析完了（既存の場合）
  - ユーザー確認・承認済み
  - "MANDATORY: 要件定義完了時点でコミット実行"
    - git add .
    - git commit -m "feat: 要件定義完了 - [機能名] の要件定義書作成"

next_steps:
  - ユーザーから「基本設計を開始してください」指示を待つ
```

### **Step 1-2: 基本設計・テスト戦略策定** 🤖➡️👤
```yaml
トリガー: ユーザーの基本設計開始指示
実行者: リーダーエージェント → ユーザーレビュー

CRITICAL_ACTIONS:
  既存プロジェクトの場合:
    - 既存アーキテクチャとの整合性確認
    - 既存技術スタックの活用検討
    - 既存APIとの連携設計
    - 既存データベーススキーマへの影響分析
  
  新規構築の場合:
    - 技術スタック選定
    - システムアーキテクチャ設計
    - データベース設計
    - API仕様設計
  
  共通アクション:
    - TDD戦略策定
    - 単体テスト設計方針策定
    - E2Eテスト設計・テストシナリオ策定
    - ユーザーレビュー・承認取得

test_strategy_design:
  tdd_strategy:
    - テスト駆動開発戦略の策定
    - 単体テスト設計方針
    - テストファースト原則の定義
    - テストカバレッジ基準設定
  
  unit_test_guidelines:
    - 機能別単体テスト方針
    - API仕様に基づくテスト設計
    - 異常系・境界値テスト方針
    - モック・スタブ利用方針
  
  e2e_test_design:
    - ユーザーシナリオベースのE2Eテスト設計
    - 機能間連携テストシナリオ作成
    - 異常系・エラーハンドリングテスト設計
    - 基本動作確認・テスト設計
    - ブラウザ自動化テスト環境設計
    - API統合テスト環境設計
    - テストデータ・フィクスチャ設計方針
    - CI/CD統合用テスト戦略

completion_criteria:
  既存プロジェクトの場合:
    - 既存システムとの統合設計書作成済み
    - API拡張仕様書作成済み
    - データベース変更影響分析書作成済み
  
  新規構築の場合:
    - システム設計書作成済み
    - API仕様書 (OpenAPI) 作成済み
    - データベーススキーマ作成済み
    - 技術選定理由書作成済み
  
  共通:
    - TDD実装ガイドライン作成済み
    - 単体テスト設計方針書作成済み
    - E2Eテスト設計書・テストシナリオ仕様書作成済み
    - ユーザー承認済み
    - "MANDATORY: 基本設計完了時点でコミット実行"
      - git add .
      - git commit -m "feat: 基本設計完了 - [機能名] のシステム設計・API仕様・テスト戦略策定完了"

next_steps:
  - 「Phase 1完了。Phase 2へ移行準備完了」をユーザーに報告
  - "MANDATORY: 次のように明確に指示する"
  - 「Phase 1完了。次フェーズへの移行指示のため、@.ai-framework/04_multi_agent_operational_workflow.md をリーダーエージェントに読み込ませてください。」
```

---

## 🎯 重要な制約・注意事項

### **リーダーエージェントの役割制限**
- **Phase 1では実装は行わない**
- **設計・要件定義・戦略策定のみ**
- **実装に関する質問は「Phase 3で実装エージェントが担当します」と回答**

### **フェーズ移行ルール**
- **Phase 1完了後、必ずユーザー確認を取る**
- **自動的に次フェーズに進まない**
- **ユーザーから「Phase 2に進んでください」指示を待つ**

---

## 🔗 関連ドキュメント
- **次フェーズ**: @.ai-framework/workflow_phase_2_task_breakdown.md
- **エージェント通信**: @.ai-framework/05_practical_agent_communication_system.md (Phase 3以降で必要)

## 🚀 実行方法
```bash
# Phase 1-2専用スクリプトを使用
./scripts/phase1-2-start.sh
``` 