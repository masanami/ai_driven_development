# 🧠 AI-First 知識ベースアーキテクチャ

## 📚 知識ベース概要

AIエージェントの「長期記憶」と「共有知」として機能する知識ベースを設計します。
各エージェントが一貫した情報にアクセスし、効率的なコラボレーションを実現するための基盤となります。

---

## 🏗️ 知識ベース運用戦略

### 基本方針: AI-First アーキテクチャ

#### 既存ドキュメントがある場合
- **適合性チェック**: 既存ドキュメントがAI-Firstアーキテクチャに準拠しているか確認
- **抜け漏れ検出**: 知識ベースチェックリストで不足情報を特定
- **段階的改善**: 既存ドキュメントを参照しつつ、Markdownで補完

#### コードベースがない場合
- **完全構造化**: AI-Firstアーキテクチャに従ってMarkdown形式で作成
- **体系的管理**: 要件・設計・開発・品質の4カテゴリで網羅的に文書化
- **一貫性保証**: 最初から構造化文書で品質・整合性を担保

### AI-First アーキテクチャ構造
```
project-root/
└── docs/                            # 知識ベースルート
    ├── 01_requirements/             # 要件・仕様ドキュメント
    ├── 02_design/                   # 設計ドキュメント
    ├── 03_development/              # 開発標準・規約
    └── 04_quality/                  # 品質保証ドキュメント
```

### 運用原則
- **構造化重視**: AIエージェントの処理効率を最大化
- **セマンティック最適化**: 機械学習・自然言語処理に最適化された形式
- **相互参照**: 既存ドキュメントとMarkdown文書の相互補完
- **継続的改善**: プロジェクト進行に応じて知識ベースを更新

---

## 📂 AI-First カテゴリ設計

### 01_requirements/ - 要件・仕様

#### 📄 AI主導ファイル構成 (docs/01_requirements/)
```
docs/01_requirements/
├── project_overview.md             # プロジェクト概要
├── user_stories.md                 # ユーザーストーリー
├── functional_specs.md             # 機能仕様
└── business_rules.md               # ビジネスルール
```

### 02_design/ - 設計ドキュメント

#### 📄 AI主導ファイル構成 (docs/02_design/)
```
docs/02_design/
├── architecture.md                 # システムアーキテクチャ
├── feature_designs/                # 機能設計
│   ├── feature_001_auth.md         # 認証機能(例)
│   ├── feature_002_user.md         # ユーザー管理（例）
│   └── feature_XXX_name.md         # 各種機能設計
├── technology_stack.md             # 技術スタック
├── api_specifications.md           # API仕様
├── database_design.md              # データベース設計
└── deployment_config.md            # デプロイメント構成
```

### 03_development/ - 開発標準・規約

#### 📄 AI主導ファイル構成 (docs/03_development/)
```
docs/03_development/
├── coding_standards.md             # コーディング規約
├── development_setup.md            # 開発環境セットアップ
└── troubleshooting.md              # トラブルシューティング
```

### 04_quality/ - 品質保証・テスト

#### 📄 AI主導ファイル構成 (docs/04_quality/)
```
docs/04_quality/
├── test_strategy.md                # テスト戦略（TDD方針、カバレッジ目標）
├── e2e_test_scenarios/             # E2Eテストシナリオ
│   ├── scenario_001_user_flow.md   # ユーザー登録〜ログインフロー
│   ├── scenario_002_main_feature.md # メイン機能の操作フロー
│   └── scenario_XXX_name.md        # 各種E2Eシナリオ
├── quality_standards.md            # 品質基準
└── ci_cd_config.md                 # CI/CD設定、自動化パイプライン
```

---

## 📋 知識ベースチェックリスト

### プロジェクト完全性確認用

#### 要件 (Requirements)
- [ ] ユーザーストーリーが文書化されているか
- [ ] ビジネスルールが明確化されているか
- [ ] 機能仕様が定義されているか

#### 設計 (Design)
- [ ] システムアーキテクチャが定義されているか
- [ ] 各機能の設計書が存在するか
- [ ] API仕様書が存在するか
- [ ] データベース設計が定義されているか
- [ ] 技術スタックが明確か

#### 開発 (Development)
- [ ] コーディング規約が定義されているか
- [ ] 開発環境セットアップガイドが存在するか

#### 品質 (Quality)
- [ ] テスト戦略が定義されているか
- [ ] E2Eテストシナリオが作成されているか
- [ ] CI/CDパイプラインが構築されているか

---

## 🤖 Markdown構造化データ例

### ユーザーストーリー例 (user_stories.md)

```markdown
# ユーザーストーリー

## US001: ユーザー登録機能

**優先度**: 高  
**ステータス**: 承認済み  
**最終更新**: 2024-12-29

### ストーリー
- **As**: 新規ユーザー
- **I want**: メールアドレスとパスワードでアカウントを作成したい
- **So that**: サービスを利用開始できる

### タグ
`authentication`, `mvp`, `user_management`
```

### 機能設計例 (feature_designs/feature_001_auth.md)

```markdown
# 認証機能設計

## 概要
ユーザー認証・認可機能の詳細設計

## 機能要件
- ユーザー登録（メール/パスワード）
- ログイン/ログアウト
- パスワードリセット
- セッション管理

## 技術仕様
### API エンドポイント
- POST /api/auth/register
- POST /api/auth/login
- POST /api/auth/logout
- POST /api/auth/reset-password

### データモデル
- users テーブル: id, email, password_hash, created_at
- sessions テーブル: id, user_id, token, expires_at

### セキュリティ要件
- パスワードは bcrypt でハッシュ化
- JWT トークンによる認証
- リフレッシュトークンの実装
```

### E2Eテストシナリオ例 (e2e_test_scenarios/scenario_001_user_flow.md)

```markdown
# ユーザー登録・ログインフロー

## シナリオ概要
新規ユーザーがアカウントを作成してログインするまでの一連の流れを検証

## 前提条件
- アプリケーションが起動している
- テスト用メールアドレスが利用可能

## テストステップ
1. **トップページアクセス**
   - URL: https://example.com
   - 期待: トップページが正常に表示される

2. **新規登録画面へ遷移**
   - 操作: 「新規登録」ボタンをクリック
   - 期待: 登録フォームが表示される

3. **登録情報入力**
   - 入力: 
     - メール: test@example.com
     - パスワード: Test1234!
   - 期待: バリデーションエラーなし

4. **登録完了**
   - 操作: 「登録」ボタンをクリック
   - 期待: 確認メール送信メッセージが表示

5. **ログイン確認**
   - 操作: ログイン画面で認証情報を入力
   - 期待: ダッシュボードへリダイレクト

## 異常系テスト
- 既存メールアドレスでの登録 → エラーメッセージ表示
- 無効なパスワード形式 → バリデーションエラー
```

---

## 🔄 統一データ管理システム

### データ管理プロセス

#### 既存ドキュメントがある場合
1. 既存ドキュメントをAI-Firstアーキテクチャと照合
2. チェックリストで抜け漏れを特定
3. Markdown形式で不足情報を補完
4. 既存ドキュメントとMarkdown文書を相互参照

#### コードベースがない場合
1. AI-Firstアーキテクチャに従ってMarkdown作成
2. 4カテゴリ（要件・設計・開発・品質）で網羅的に文書化
3. 文書構造検証で品質保証
4. AIエージェント間でデータ共有

#### 管理規則
- Markdownヘッダーによる構造化管理
- 既存ドキュメントとの相互参照リンク
- 文書間の相互リンクによるクロスリファレンス
- AIエージェント直接アクセス最適化

### 品質保証システム

#### 自動品質チェック
- チェックリストによる完全性確認
- 情報の一貫性検証
- 依存関係の整合性チェック
- ドキュメント間の矛盾検出

#### 継続的改善
- プロジェクト進行に応じた更新
- AIフィードバックによる最適化
- 知識ベースの段階的拡充